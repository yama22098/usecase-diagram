stateDiagram-v2
    [*] --> 注文作成中

    注文作成中 --> 注文確認待ち : 商品をカートに追加
    注文確認待ち --> 支払い待ち : 注文確定
    支払い待ち --> 配送準備中 : 支払い完了
    配送準備中 --> 配送済み : 配送完了

    %% キャンセル（支払い完了まで可能）
    注文作成中 --> キャンセル済み : 注文キャンセル
    注文確認待ち --> キャンセル済み : 注文キャンセル
    支払い待ち --> キャンセル済み : 注文キャンセル

    %% 支払い失敗時の遷移
    支払い待ち --> 支払い失敗 : 支払い失敗
    支払い失敗 --> 支払い待ち : 再度支払い